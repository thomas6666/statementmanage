!function(t){var e=function(e,s){this.$element=t(e),this.options=t.extend({},t.fn.autocomplete.defaults,s),this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=t(this.options.menu),this.shown=!1,this.formatItem=this.options.formatItem||this.formatItem,this.setValue=this.options.setValue||this.setValue,this.listen()};e.prototype={constructor:e,processObj:0,formatItem:function(t){return t.toString()},setValue:function(t){return{"data-value":t.toString(),"real-value":t.toString()}},select:function(){var t=this.$menu.find(".active").attr("data-value"),e=this.$menu.find(".active").attr("real-value");return this.$element.val(this.updater(t)).attr("real-value",e).change(),this.hide()},updater:function(t){return t},show:function(){var e=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:e.top+e.height,left:e.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(e){var s;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(s=t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source,s?this.process(s):this)},process:function(t){return t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},highlighter:function(t){var e=this;t=e.formatItem(t);var s=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(new RegExp("("+s+")","ig"),function(t,e){return'<strong style="color:#FF6600;">'+e+"</strong>"})},render:function(e){var s=this;return e=t(e).map(function(e,i){return e=t(s.options.item).attr(s.setValue(i)),e.find("a").html(s.highlighter(i)),e[0]}),e.first().addClass("active"),this.$menu.html(e),this},next:function(e){var s=this.$menu.find(".active").removeClass("active"),i=s.next();i.length||(i=t(this.$menu.find("li")[0])),i.addClass("active")},prev:function(t){var e=this.$menu.find(".active").removeClass("active"),s=e.prev();s.length||(s=this.$menu.find("li").last()),s.addClass("active")},listen:function(){this.$element.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this)).on("mouseleave","li",t.proxy(this.mouseleave,this))},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}t.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:var e=this;e.processObj&&(clearTimeout(e.processObj),e.processObj=0),e.processObj=setTimeout(function(){e.lookup()},e.options.delay)}t.stopPropagation(),t.preventDefault()},focus:function(t){this.focused=!0},blur:function(t){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(t){t.stopPropagation(),t.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")},mouseleave:function(t){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var s=t.fn.autocomplete;t.fn.autocomplete=function(s){return this.each(function(){var i=t(this),o=i.data("autocomplete"),n="object"==typeof s&&s;o||i.data("autocomplete",o=new e(this,n)),"string"==typeof s&&o[s]()})},t.fn.autocomplete.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1,delay:500},t.fn.autocomplete.Constructor=e,t.fn.autocomplete.noConflict=function(){return t.fn.autocomplete=s,this},t(document).on("focus.autocomplete.data-api",'[data-provide="autocomplete"]',function(e){var s=t(this);s.data("autocomplete")||s.autocomplete(s.data())})}(window.jQuery);